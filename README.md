# NapCat æ›¼æ³¢è¯­éŸ³ç”Ÿæˆå™¨æ’ä»¶

ä¸€ä¸ªé€šè¿‡åœ¨çº¿APIç”Ÿæˆæ›¼æ³¢è¯­éŸ³çš„ NapCat æ’ä»¶ï¼Œä½¿ç”¨æŒ‡ä»¤ `/æ›¼æ³¢ {è¦è¯´çš„å†…å®¹}` å³å¯ç”Ÿæˆå¹¶å‘é€è¯­éŸ³æ¶ˆæ¯ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
napcat-plugin-manborvc/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts              # æ’ä»¶å…¥å£ï¼Œå¯¼å‡ºç”Ÿå‘½å‘¨æœŸå‡½æ•°
â”‚   â”œâ”€â”€ config.ts             # é…ç½®å®šä¹‰å’Œ WebUI Schema
â”‚   â”œâ”€â”€ types.ts              # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â””â”€â”€ state.ts          # å…¨å±€çŠ¶æ€ç®¡ç†å•ä¾‹
â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â””â”€â”€ message-handler.ts # æ¶ˆæ¯å¤„ç†å™¨ï¼ˆå‘½ä»¤è§£æã€æ¶ˆæ¯å·¥å…·ï¼‰
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ api-service.ts    # WebUI API è·¯ç”±ï¼ˆæ— è®¤è¯æ¨¡å¼ï¼‰
â”‚   â”‚   â””â”€â”€ manbo-service.ts   # æ›¼æ³¢è¯­éŸ³æœåŠ¡ï¼ˆAPI è°ƒç”¨ã€é™é¢‘ï¼‰
â”‚   â””â”€â”€ webui/                # React SPA å‰ç«¯ï¼ˆç‹¬ç«‹æ„å»ºï¼‰
â”‚       â”œâ”€â”€ index.html
â”‚       â”œâ”€â”€ package.json
â”‚       â”œâ”€â”€ vite.config.ts
â”‚       â”œâ”€â”€ tailwind.config.js
â”‚       â”œâ”€â”€ tsconfig.json
â”‚       â””â”€â”€ src/
â”‚           â”œâ”€â”€ App.tsx           # åº”ç”¨æ ¹ç»„ä»¶ï¼Œé¡µé¢è·¯ç”±
â”‚           â”œâ”€â”€ main.tsx          # React å…¥å£
â”‚           â”œâ”€â”€ index.css         # TailwindCSS + è‡ªå®šä¹‰æ ·å¼
â”‚           â”œâ”€â”€ types.ts          # å‰ç«¯ç±»å‹å®šä¹‰
â”‚           â”œâ”€â”€ vite-env.d.ts     # Vite ç¯å¢ƒå£°æ˜
â”‚           â”œâ”€â”€ utils/
â”‚           â”‚   â””â”€â”€ api.ts        # API è¯·æ±‚å°è£…
â”‚           â”œâ”€â”€ hooks/
â”‚           â”‚   â”œâ”€â”€ useStatus.ts  # çŠ¶æ€è½®è¯¢ Hook
â”‚           â”‚   â”œâ”€â”€ useTheme.ts   # ä¸»é¢˜åˆ‡æ¢ Hook
â”‚           â”‚   â””â”€â”€ useToast.ts   # Toast é€šçŸ¥ Hook
â”‚           â”œâ”€â”€ components/
â”‚           â”‚   â”œâ”€â”€ Sidebar.tsx       # ä¾§è¾¹æ å¯¼èˆª
â”‚           â”‚   â”œâ”€â”€ Header.tsx        # é¡µé¢å¤´éƒ¨
â”‚           â”‚   â”œâ”€â”€ ToastContainer.tsx # Toast é€šçŸ¥å®¹å™¨
â”‚           â”‚   â””â”€â”€ icons.tsx         # SVG å›¾æ ‡ç»„ä»¶
â”‚           â””â”€â”€ pages/
â”‚               â”œâ”€â”€ StatusPage.tsx  # ä»ªè¡¨ç›˜é¡µé¢
â”‚               â”œâ”€â”€ ConfigPage.tsx  # é…ç½®ç®¡ç†é¡µé¢
â”‚               â””â”€â”€ GroupsPage.tsx  # ç¾¤ç®¡ç†é¡µé¢
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ workflows/
â”‚   â”‚   â”œâ”€â”€ release.yml        # CI/CD è‡ªåŠ¨æ„å»ºå‘å¸ƒ
â”‚   â”‚   â””â”€â”€ update-index.yml    # è‡ªåŠ¨æ›´æ–°æ’ä»¶ç´¢å¼•
â”‚   â”œâ”€â”€ prompt/
â”‚   â”‚   â”œâ”€â”€ default.md             # é»˜è®¤ Release Note æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ release_note_prompt.txt # Release Note æç¤º
â”‚   â””â”€â”€ copilot-instructions.md  # Copilot ä¸Šä¸‹æ–‡è¯´æ˜
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts             # Vite æ„å»ºé…ç½®ï¼ˆå«èµ„æºå¤åˆ¶æ’ä»¶ï¼‰
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. é…ç½® API åœ°å€

åœ¨ NapCat WebUI ä¸­ï¼Œè¿›å…¥æ’ä»¶é…ç½®é¢æ¿ï¼š

- **æ›¼æ³¢APIåœ°å€**ï¼šå¡«å†™ `https://api.milorapart.top/apis/mbAIsc`
- **é™é¢‘è®¾ç½®ï¼ˆæ¯åˆ†é’Ÿï¼‰**ï¼šè®¾ç½®è¯·æ±‚é™åˆ¶ï¼Œ-1 è¡¨ç¤ºä¸é™åˆ¶

### 3. ä½¿ç”¨æ–¹å¼

åœ¨ QQ ç¾¤æˆ–ç§èŠä¸­è¾“å…¥ï¼š

```
/æ›¼æ³¢ ä½ å¥½
```

æ’ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆæ›¼æ³¢è¯­éŸ³å¹¶å‘é€ã€‚

## ğŸ“– åŠŸèƒ½è¯´æ˜

### æ ¸å¿ƒåŠŸèƒ½

- **è¯­éŸ³ç”Ÿæˆ**ï¼šé€šè¿‡åœ¨çº¿ API ç”Ÿæˆæ›¼æ³¢è¯­éŸ³
- **è‡ªåŠ¨å‘é€**ï¼šç”Ÿæˆå®Œæˆåè‡ªåŠ¨å‘é€ä¸ºè¯­éŸ³æ¶ˆæ¯
- **é™é¢‘ä¿æŠ¤**ï¼šæ”¯æŒæŒ‰ç¾¤æˆ–å…¨å±€é™é¢‘ï¼Œé˜²æ­¢ API è¢«å°ç¦
- **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º

### é…ç½®é¡¹

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|-------|------|-------|
| æ›¼æ³¢APIåœ°å€ | æ›¼æ³¢è¯­éŸ³ç”Ÿæˆ API çš„å®Œæ•´ URL | `""` |
| é™é¢‘è®¾ç½®ï¼ˆæ¯åˆ†é’Ÿï¼‰ | æ¯åˆ†é’Ÿè¯·æ±‚æ¬¡æ•°é™åˆ¶ï¼Œ-1 è¡¨ç¤ºä¸é™åˆ¶ï¼Œ0 è¡¨ç¤ºç¦ç”¨ | `-1` |
| å¯ç”¨æ’ä»¶ | æ˜¯å¦å¯ç”¨æ­¤æ’ä»¶çš„åŠŸèƒ½ | `true` |
| è°ƒè¯•æ¨¡å¼ | å¯ç”¨åå°†è¾“å‡ºè¯¦ç»†çš„è°ƒè¯•æ—¥å¿— | `false` |

### API è¯´æ˜

ä½¿ç”¨çš„æ›¼æ³¢ API æ ¼å¼ï¼š

- **è¯·æ±‚åœ°å€**ï¼š`https://api.milorapart.top/apis/mbAIsc`
- **è¯·æ±‚æ–¹å¼**ï¼šGET
- **è¯·æ±‚å‚æ•°**ï¼š`text`ï¼ˆè¦è¯´çš„å†…å®¹ï¼‰
- **è¿”å›æ ¼å¼**ï¼š
  ```json
  {
    "code": 200,
    "msg": "ç”Ÿæˆå®Œæˆ!",
    "url": "https://api.milorapart.top/voice/de7056880ef055de3d51d864b47d978b.mp3",
    "api_source": "å®˜æ–¹APIç½‘:https://api.milorapart.top/"
  }
  ```

## ğŸ”§ æ„å»ºä¸å¼€å‘

```bash
# å®Œæ•´æ„å»ºï¼ˆè‡ªåŠ¨æ„å»º WebUI å‰ç«¯ + åç«¯ + èµ„æºå¤åˆ¶ï¼‰
npm run build

# ç±»å‹æ£€æŸ¥
npm run typecheck

# å¼€å‘æ¨¡å¼ï¼ˆwatch æ„å»º + è‡ªåŠ¨éƒ¨ç½² + çƒ­é‡è½½ï¼‰
npm run dev

# ä¸€é”®éƒ¨ç½²ï¼ˆæ„å»º + è‡ªåŠ¨å¤åˆ¶åˆ°è¿œç¨‹æ’ä»¶ç›®å½• + çƒ­é‡è½½ï¼‰
npm run deploy
```

## ğŸ“¦ éƒ¨ç½²

### æ–¹å¼ä¸€ï¼šä¸€é”®éƒ¨ç½²ï¼ˆæ¨èå¼€å‘æ—¶ä½¿ç”¨ï¼‰

ç¡®ä¿ NapCat ç«¯å·²å®‰è£…å¹¶å¯ç”¨ `napcat-plugin-debug` æ’ä»¶ï¼Œç„¶åï¼š

```bash
npm run deploy
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

1. è¿è¡Œ `npm run build` æ„å»ºæ’ä»¶
2. å°† `dist/` ç›®å½•çš„å†…å®¹å¤åˆ¶åˆ° NapCat çš„æ’ä»¶ç›®å½•
3. åœ¨ NapCat ä¸­å¯ç”¨æ’ä»¶

## ğŸš€ CI/CD è‡ªåŠ¨å‘å¸ƒ

é¡¹ç›®å†…ç½®äº† GitHub Actions å·¥ä½œæµï¼š

### 1. è‡ªåŠ¨æ„å»ºå‘å¸ƒï¼ˆ`release.yml`ï¼‰

æ¨é€ `v*` æ ¼å¼çš„ tag å³å¯è‡ªåŠ¨æ„å»ºå¹¶åˆ›å»º GitHub Releaseã€‚

```bash
git tag v1.0.0
git push origin v1.0.0
```

### 2. è‡ªåŠ¨æ›´æ–°æ’ä»¶ç´¢å¼•ï¼ˆ`update-index.yml`ï¼‰

Release å‘å¸ƒåï¼Œä¼šè‡ªåŠ¨å‘ [napcat-plugin-index](https://github.com/NapNeko/napcat-plugin-index) æäº¤ PR æ›´æ–°æ’ä»¶ç´¢å¼•ã€‚

## ğŸ“„ è®¸å¯è¯

MIT License
